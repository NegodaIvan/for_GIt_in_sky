---
   - name: Update apt
     apt: update_cache=yes
     when: ansible_os_family == "Debian"
     tags: install

   - name: install web server
     apt: 
      pkg: ['zsh=5.4*','wget=1.19.4*', 'unzip', 'nginx=1.14.*', 'letsencrypt']
     when: ansible_os_family == "Debian"
     tags: install
 
   - name: net.core.somaxconn
     sysctl:
      name: net.core.somaxconn
      value: '65535'
      sysctl_set: yes
     tags: sysctl
      
   
   - name: fs.file-max
     sysctl:
      name: fs.file-max
      value: '1204000'
      sysctl_set: yes
     tags: sysctl

   - name: add user admin
     user:
       name: admin
       password: $6$XdXn0Hbdrr9zfKfP$dGaFOVC0ZodgClG0v7Ut8lxOvKQUX8tFX7KmWXWJQChJpWS9sVZ81CKEdHoh7OrSnBZudpGaByUJR61HkWpVW.
       shell: /bin/bash
       groups: sudo
       append: yes

   - name: Set up multiple authorized keys to admin
     authorized_key:
       user: admin
       state: present
       key: '{{ item }}'
     with_file:
     - /home/negoda/.ssh/id_rsa.pub
     - /home/negoda/.ssh/second_key.pub
